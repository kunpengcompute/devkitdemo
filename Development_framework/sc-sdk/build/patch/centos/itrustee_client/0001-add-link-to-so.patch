diff --git a/Makefile b/Makefile
index fec9a1c..1842407 100644
--- a/Makefile
+++ b/Makefile
@@ -1,14 +1,16 @@
-TARGET_LIB := libteec.so
+TARGET_LIB := libteec.so.1
 TARGET_APP := teecd
 TARGET_DIR := dist
 LIBC_SEC   := libboundscheck
 TARGET_LOG := tlogcat
-TARGET_LIBSEC := libboundscheck.so
+TARGET_LIBSEC := libboundscheck.so.1
 TARGET_TEE_TELEPORT := tee_teleport
 TARGET_AGENTD := agentd
 WITH_CONFIDENTIAL_CONTAINER ?= true
 CROSS_DOMAIN_PERF := y
 
+TARGET_LIB_SO_NAME := libteec.so
+
 COMMON_CFLAGS :=
 ifeq ($(WITH_CONFIDENTIAL_CONTAINER), true)
 	COMMON_CFLAGS += -DCONFIG_PATH_NAMED_SOCKET=\"/var/itrustee/teecd/teecd.sock\"
@@ -73,10 +75,13 @@ $(TARGET_LIBSEC):
 
 $(TARGET_LIB):$(TARGET_LIBSEC) $(LIB_SOURCES)
 	@echo "compile libteec.so"
-	@$(CC) $(LIB_CFLAGS) -o $@ $(LIB_SOURCES) $(LIB_LDFLAGS)
+	@$(CC) $(LIB_CFLAGS) -Wl,-soname,$(TARGET_LIB_SO_NAME) -o $@ $(LIB_SOURCES) $(LIB_LDFLAGS)
+	@ln -s libteec.so.1 libteec.so
 	@mkdir -p $(TARGET_DIR)
+	@mv libteec.so.1 $(TARGET_DIR)
 	@mv libteec.so $(TARGET_DIR)
-	@cp $(LIBC_SEC)/lib/libboundscheck.so $(TARGET_DIR)
+	@cp $(LIBC_SEC)/lib/libboundscheck.so.1 $(TARGET_DIR)
+	@cp -d $(LIBC_SEC)/lib/libboundscheck.so $(TARGET_DIR)
 	@echo "after compile libteec.so"
 
 APP_CFLAGS := $(COMMON_CFLAGS) -DSEC_STORAGE_DATA_KUNPENG_PATH -D_GNU_SOURCE
diff --git a/src/libteec_vendor/tee_client_api.c b/src/libteec_vendor/tee_client_api.c
index 7182d94..ba593e5 100644
--- a/src/libteec_vendor/tee_client_api.c
+++ b/src/libteec_vendor/tee_client_api.c
@@ -1125,7 +1125,8 @@ static TEEC_Result CheckRegisterShm(const TEEC_Operation *operation)
         return TEEC_SUCCESS;
     }
 
-    for (uint32_t paramCnt = 0; paramCnt < TEEC_PARAM_NUM; paramCnt++) {
+    uint32_t paramCnt;
+    for (paramCnt = 0; paramCnt < TEEC_PARAM_NUM; paramCnt++) {
         if (TEEC_PARAM_TYPE_GET(operation->paramTypes, paramCnt) == TEEC_MEMREF_REGISTER_INOUT) {
             return TEEC_ERROR_BAD_PARAMETERS;
         }
